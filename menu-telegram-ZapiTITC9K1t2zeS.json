{"createdAt":"2025-09-16T16:48:45.215Z","updatedAt":"2025-09-17T00:46:51.338Z","id":"ZapiTITC9K1t2zeS","name":"Menu Telegram","active":true,"isArchived":false,"nodes":[{"parameters":{"updates":["message"],"additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[-384,-64],"id":"5f04be34-a4c2-4e9c-9bd9-0c4ca8bec24e","name":"Telegram Trigger","webhookId":"bff44d1f-1a8a-4269-ac87-c008907e5a12","credentials":{"telegramApi":{"id":"DIKHR2A0QcTIdlIm","name":"n8n"}}},{"parameters":{"jsCode":"// Extrai os dados do trigger do Telegram\n// O objeto $json pode ser sÃ³ $json ou $json.message dependendo do evento\nconst message = $json.message;\nconst firstName = message.from.first_name || 'Cliente';\nconst chatId = message.chat.id;\n\n// FunÃ§Ã£o para determinar a saudaÃ§Ã£o\nfunction determinarSaudacao() {\n    // Fuso horÃ¡rio do Brasil (-3)\n    const agora = new Date(new Date().toLocaleString(\"en-US\", {timeZone: \"America/Sao_Paulo\"}));\n    const hora = agora.getHours();\n\n    if (hora >= 6 && hora < 12) {\n        return \"Bom dia!\";\n    } else if (hora >= 12 && hora < 18) {\n        return \"Boa tarde!\";\n    } else {\n        return \"Boa noite!\";\n    }\n}\n\nconst saudacao = determinarSaudacao();\n\n// Retorna os dados para serem usados nos prÃ³ximos nÃ³s\nreturn {\n  firstName: firstName,\n  chatId: chatId,\n  saudacao: saudacao\n};"},"type":"n8n-nodes-base.code","typeVersion":2,"position":[-208,-64],"id":"1862dc08-8127-429b-a5ae-269b7c2d6116","name":"Separa os dados"},{"parameters":{"chatId":"={{ $json.chatId }}","text":"=OlÃ¡ !! {{ $json.saudacao }} {{ $json.firstName }}  Bem-vindo ao atendimento IA da Wellnet Telecom!! ðŸ˜ƒðŸ˜ƒ  Selecione uma das opÃ§Ãµes abaixo:","replyMarkup":"inlineKeyboard","inlineKeyboard":{"rows":[{"row":{"buttons":[{"text":"ðŸ¤– Suporte IA","additionalFields":{"callback_data":"suporte_ia"}}]}},{"row":{"buttons":[{"text":"2Âº Via Boletos","additionalFields":{"callback_data":"boletos"}},{"text":"ðŸ’° Pix e Pagamentos","additionalFields":{"callback_data":"pix"}},{"text":"Suporte TÃ©cnico","additionalFields":{"callback_data":"suporte_tecnico"}}]}},{"row":{"buttons":[{"text":"ðŸ‘¤ Torne-se Cliente","additionalFields":{"callback_data":"novo_cliente"}},{"text":"ðŸ‘©ðŸ»â€ðŸ’» Ãrea do Assinante","additionalFields":{"callback_data":"area_assinante"}},{"text":"âŒ Cancelamento","additionalFields":{"callback_data":"cancelamento"}}]}}]},"additionalFields":{"appendAttribution":false}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[-16,-64],"id":"f352e31d-acc5-450b-8a04-535bffc3bb57","name":"Envia Menu","webhookId":"ec5f3fbe-d8ea-48ca-9275-693ce4041218","credentials":{"telegramApi":{"id":"DIKHR2A0QcTIdlIm","name":"n8n"}}}],"connections":{"Telegram Trigger":{"main":[[{"node":"Separa os dados","type":"main","index":0}]]},"Separa os dados":{"main":[[{"node":"Envia Menu","type":"main","index":0}]]},"Envia Menu":{"main":[[]]}},"settings":{"executionOrder":"v1"},"staticData":null,"meta":{"templateCredsSetupCompleted":true},"pinData":{},"versionId":"1192713c-222f-4d9b-8f05-f88a7aab17ad","triggerCount":1,"shared":[{"createdAt":"2025-09-16T16:48:45.215Z","updatedAt":"2025-09-16T16:48:45.215Z","role":"workflow:owner","workflowId":"ZapiTITC9K1t2zeS","projectId":"9hAKJPuMlcuGxWxS"}],"tags":[]}