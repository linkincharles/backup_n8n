{"createdAt":"2025-09-19T23:43:43.266Z","updatedAt":"2025-09-20T00:02:33.742Z","id":"CEZBQIZfbNWlI241","name":"Agente financeiro","active":false,"isArchived":false,"nodes":[{"parameters":{"options":{}},"type":"@n8n/n8n-nodes-langchain.chatTrigger","typeVersion":1.1,"position":[-512,-192],"id":"dd094f58-74f6-4fb4-a9f7-30bc3fd3da79","name":"When chat message received","webhookId":"9fe0d4e3-aac5-44e5-951f-3367afad2b87"},{"parameters":{"options":{"systemMessage":"=<instru√ß√µes>\n\nAtue como um Assistente Financeiro, especializado no gerenciamento de registros de gastos dentro do Supabase. Sua principal fun√ß√£o √© ajudar o usu√°rio a visualizar, adicionar, atualizar, deletar e somar despesas de forma eficiente.\n\nSempre que o usu√°rio solicitar, ative a ferramenta apropriada para realizar a a√ß√£o desejada. Siga as instru√ß√µes abaixo cuidadosamente para garantir precis√£o e clareza na execu√ß√£o das tarefas.\n\nFuncionalidades Dispon√≠veis\n\n1. Visualizar Gastos (tool_visualizar_gastos)\nQuando ativada, exibe os registros de gastos cadastrados, incluindo:\n‚úÖ Nome do gasto\n‚úÖ Tipo de gasto\n‚úÖ Valor do gasto\n\nRegras de Ativa√ß√£o:\nPergunte ao  usu√°rio se ele quer filtrar os resultados por tipo de gasto ou per√≠odo.\n\n2. Adicionar Gasto (tool_criar_gasto)\nEssa ferramenta cria um novo registro de gastos na tabela do Supabase.\n\nPar√¢metros obrigat√≥rios para ativa√ß√£o:\nüîπ nome_gasto: Nome do gasto.\nüîπ valor_gasto: Valor do gasto.\nüîπ tipo_gasto: Classifica√ß√£o do gasto dentro das 6 categorias dispon√≠veis:\n\nMercado\n\nDivers√£o\n\nComida\n\nEduca√ß√£o\n\nAssinatura\n\nTransporte\n\nRegras de Ativa√ß√£o:\nCaso o usu√°rio n√£o informe o tipo de gasto, voc√™ deve classific√°-lo automaticamente com base no contexto da mensagem.\n\nAntes de cadastrar o gasto, confirme os detalhes com o usu√°rio e pe√ßa a aprova√ß√£o final antes de chamar a ferramenta.\n\n\n3. Editar Gasto (tool_atualizar_gasto)\nEssa ferramenta permite modificar um gasto existente.\n\nPasso a Passo para ativa√ß√£o:\n1Ô∏è‚É£ Pergunte qual gasto o usu√°rio deseja editar (nome exato).\n2Ô∏è‚É£ Para evitar erros, ative primeiro a ferramenta tool_visualizar_gastos para confirmar a exist√™ncia do registro.\n3Ô∏è‚É£ Confirme com o usu√°rio qual gasto ele deseja modificar antes de prosseguir.\n4Ô∏è‚É£ Ap√≥s obter o nome correto, permita que o usu√°rio especifique as altera√ß√µes desejadas (nome, valor ou tipo).\n5Ô∏è‚É£ Realize a atualiza√ß√£o e exiba as informa√ß√µes do gasto atualizado para garantir transpar√™ncia.\n\n\n4. Deletar Gasto (tool_deletar_gastos)\nEssa ferramenta remove um gasto do sistema.\n\nPasso a Passo para ativa√ß√£o:\n1Ô∏è‚É£ Pergunte qual gasto o usu√°rio deseja deletar (nome exato).\n2Ô∏è‚É£ Para evitar exclus√µes erradas, ative primeiro a ferramenta tool_visualizar_gastos para confirmar a exist√™ncia do registro.\n3Ô∏è‚É£ Confirme com o usu√°rio antes de executar a exclus√£o.\n4Ô∏è‚É£ Ap√≥s confirma√ß√£o, delete o gasto e informe que a remo√ß√£o foi conclu√≠da.\n\n5. Somar Gastos (tool_somar_gastos)\nEssa ferramenta calcula o total dos gastos cadastrados pelo usu√°rio.\n\nRegras de Ativa√ß√£o:\nSe o usu√°rio quiser calcular os gastos de um per√≠odo espec√≠fico ou por tipo, pergunte os crit√©rios antes de somar.\n\nCaso n√£o haja filtros, some todos os gastos registrados e exiba o valor total.\n\nRegras Gerais:\nSe o usu√°rio pedir algo amb√≠guo, pe√ßa mais detalhes antes de ativar qualquer ferramenta.\n\nSempre confirme a√ß√µes cr√≠ticas como adicionar, editar ou excluir gastos antes de execut√°-las.\n\nGaranta que todas as respostas sejam claras, objetivas e organizadas.\n\n</instru√ß√µes>\n\n"}},"type":"@n8n/n8n-nodes-langchain.agent","typeVersion":1.8,"position":[-288,-192],"id":"75935006-616d-4b00-b372-4589a45a914c","name":"AI Agent"},{"parameters":{},"type":"@n8n/n8n-nodes-langchain.memoryBufferWindow","typeVersion":1.3,"position":[-176,32],"id":"fb3c82ae-96e8-4490-ba8b-4e979008dd7d","name":"Simple Memory"},{"parameters":{"operation":"getAll","tableId":"Gastos","returnAll":true},"type":"n8n-nodes-base.supabaseTool","typeVersion":1,"position":[-16,32],"id":"67448481-8fc5-4a57-8634-10fb28b121a2","name":"tool_visualizar_gastos","credentials":{"supabaseApi":{"id":"9R984C7cTbVMCMfG","name":"Supabase account"}}},{"parameters":{"tableId":"Gastos","fieldsUi":{"fieldValues":[{"fieldId":"Nome","fieldValue":"={{ $fromAI(\"nome_gasto\") }}"},{"fieldId":"Valor","fieldValue":"={{ $fromAI(\"valor_gasto\") }}"},{"fieldId":"Tipo","fieldValue":"={{ $fromAI(\"tipo_gasto\") }}"}]}},"type":"n8n-nodes-base.supabaseTool","typeVersion":1,"position":[176,32],"id":"a9fe6dcb-d173-4907-b2b0-a111f6e379aa","name":"tool_criar_gasto","credentials":{"supabaseApi":{"id":"9R984C7cTbVMCMfG","name":"Supabase account"}}},{"parameters":{"operation":"update","tableId":"Gastos","filters":{"conditions":[{"keyName":"Nome","condition":"eq","keyValue":"={{ $fromAI(\"nome_gasto\") }}"}]},"fieldsUi":{"fieldValues":[{"fieldId":"Nome","fieldValue":"={{ $fromAI(\"nome_gasto\") }}"},{"fieldId":"Valor","fieldValue":"={{ $fromAI(\"valor_gasto\") }}"},{"fieldId":"Tipo","fieldValue":"={{ $fromAI(\"tipo_gasto\") }}"}]}},"type":"n8n-nodes-base.supabaseTool","typeVersion":1,"position":[368,32],"id":"9abc2b90-49fb-4717-a602-33539611147a","name":"tool_atualizar_gasto","credentials":{"supabaseApi":{"id":"9R984C7cTbVMCMfG","name":"Supabase account"}}},{"parameters":{},"type":"@n8n/n8n-nodes-langchain.toolCalculator","typeVersion":1,"position":[768,32],"id":"965624f9-589a-44a3-a343-e2b2cff05455","name":"Calculator"},{"parameters":{"operation":"delete","tableId":"Gastos","filters":{"conditions":[{"keyName":"Nome","condition":"eq","keyValue":"={{ $fromAI(\"nome_gasto\") }}"}]}},"type":"n8n-nodes-base.supabaseTool","typeVersion":1,"position":[576,32],"id":"695318a0-6aec-4602-a829-b7785bcdb896","name":"tool_deletar_gastos","credentials":{"supabaseApi":{"id":"9R984C7cTbVMCMfG","name":"Supabase account"}}},{"parameters":{"modelName":"models/gemini-2.5-pro","options":{}},"type":"@n8n/n8n-nodes-langchain.lmChatGoogleGemini","typeVersion":1,"position":[-432,16],"id":"7bf11916-2d8f-454d-8039-f11718a5688e","name":"Google Gemini Chat Model","credentials":{"googlePalmApi":{"id":"O63hwIpz5uNbFv3E","name":"Google Gemini(PaLM) Api linkincharles6"}}}],"connections":{"When chat message received":{"main":[[{"node":"AI Agent","type":"main","index":0}]]},"Simple Memory":{"ai_memory":[[{"node":"AI Agent","type":"ai_memory","index":0}]]},"tool_visualizar_gastos":{"ai_tool":[[{"node":"AI Agent","type":"ai_tool","index":0}]]},"tool_criar_gasto":{"ai_tool":[[{"node":"AI Agent","type":"ai_tool","index":0}]]},"tool_atualizar_gasto":{"ai_tool":[[{"node":"AI Agent","type":"ai_tool","index":0}]]},"Calculator":{"ai_tool":[[{"node":"AI Agent","type":"ai_tool","index":0}]]},"tool_deletar_gastos":{"ai_tool":[[{"node":"AI Agent","type":"ai_tool","index":0}]]},"Google Gemini Chat Model":{"ai_languageModel":[[{"node":"AI Agent","type":"ai_languageModel","index":0}]]}},"settings":{"executionOrder":"v1"},"staticData":null,"meta":{"templateCredsSetupCompleted":true},"pinData":{},"versionId":"c4e65879-16d7-4d20-a296-e2a160e03761","triggerCount":0,"shared":[{"createdAt":"2025-09-19T23:43:43.266Z","updatedAt":"2025-09-19T23:43:43.266Z","role":"workflow:owner","workflowId":"CEZBQIZfbNWlI241","projectId":"9hAKJPuMlcuGxWxS"}],"tags":[]}